package com.models {		import com.models.Player;	import com.events.UnitEvent;	import com.lib.Model;		public class Turn extends Model {				private var activePlayer:Player;		private var selectedUnit:Unit;		private var moves:Array;				public function Turn(p:Player) 		{			activePlayer = p; 			selectNextUnit();		}		public function selectNextUnit():void		{			var movedFunction:Function = function(item:Unit, index:int, array:Array):Boolean			{				if(moves == null)					return true;								for(var i:int = 0; i < moves.length; i++)				{					if(moves[i].getUnit() == item)						return false;				}								return true;			}						var unitsToBeMoved:Array = activePlayer.getUnits().filter(movedFunction);			if(unitsToBeMoved.length > 0)			{				var e:UnitEvent = new UnitEvent(UnitEvent.SELECTED);				selectedUnit = unitsToBeMoved[0];				unitsToBeMoved[0].dispatchEvent(e);			}			else				trace("end of turn all units moved");		}		public function getSelectedUnit():Unit { return selectedUnit; }	}}