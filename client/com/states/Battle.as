package com.states {		import flash.display.*;	import com.models.*;	import com.factories.Maps;	import com.lib.State;	import com.controllers.*;	import com.views.BubbleView;	import com.events.StateEvent;		public class Battle extends State {		private var gameMap:Map;		private var humanController:PlayerBattleController;		private var aiController:AIBattleController = new AIBattleController();		private var players:Array;		private var turns:Array;		public function Battle(s:Stage) 		{			super(s);	    }				public function setMap(m:Map):void { gameMap = m; }		public function getPlayerController():PlayerBattleController { return humanController; }		public function setPlayerController(c:PlayerBattleController):void { humanController = c; }				public function addPlayer(p:Player):void		{			if(players == null)				players = new Array();			players.push(p);		}				public function ready(e:StateEvent):void		{			currentStage.focus = currentStage;			nextTurn();		}				public function nextTurn():void		{			var currentPlayer:Player;			var currentTurn:Turn;						if(turns == null)			{				turns = new Array();				currentPlayer = players[0];			}			else			{				if(!(turns.length & 1))				 	currentPlayer = players[1];				else					currentPlayer = players[0];			}			currentTurn = new Turn(currentPlayer);			turns.push(currentTurn);		}	}}